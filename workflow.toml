version = 1

[outbox]
backend = "sqlite"
path = "state/outbox.sqlite"

[approval]
mode = "any"
approvers = ["lead-backend", "lead-qa", "lead-integrator"]

[roles]
enabled = ["backend", "qa", "integrator", "recorder"]

[repos]
main = "."

[role_repo]
backend = "main"
qa = "main"
integrator = "main"
recorder = "main"

[labels]
routing = ["to:backend", "to:qa", "to:integrator", "to:recorder"]
states = ["state:todo", "state:doing", "state:blocked", "state:review", "state:done"]
decisions = ["decision:proposed", "decision:accepted", "decision:rejected"]
controls = ["needs-human", "autoflow:off"]
types = ["kind:task", "kind:bug", "kind:question", "kind:proposal", "kind:blocker"]
priority = ["prio:p0", "prio:p1", "prio:p2", "prio:p3"]

[groups.backend]
role = "backend"
max_concurrent = 4
listen_labels = ["to:backend"]

[groups.qa]
role = "qa"
max_concurrent = 2
listen_labels = ["to:qa", "state:review"]

[groups.integrator]
role = "integrator"
max_concurrent = 1
listen_labels = ["to:integrator", "state:review"]

[groups.recorder]
role = "recorder"
max_concurrent = 1
listen_labels = ["to:recorder"]

[flow]
require_claim_before_work = true
close_issue_requires_decision = true
auto_block_when_dependency_open = true
auto_unblock_when_dependency_closed = true

[executors.backend]
program = "go"
args = ["test", "./..."]
timeout_seconds = 1800
